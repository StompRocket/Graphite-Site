<!doctype html>
<html lang="en">

<head>

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ebbc43">
  <link rel="shortcut icon" href="/favicon.ico">
  <meta name="theme-color" content="#ffffff">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Graphite Writer | Edit</title>
  <meta name="robots" content="noindex">
  <meta name="description" content="Graphite Writer online document editor">
  <!-- Theme included stylesheets -->





  <script>
    (function(i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-105872662-1', 'auto');
    ga('send', 'pageview');
  </script>
</head>

<body class="editor">

<main id="app">
  <p>document moved to: <a :href="url">{{url}}</a></p>
</main>
<script src="/js/global/vue.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.3.0/firebase.js"></script>

  <script>
    function GetURLParameter (sParam) {
      var sPageURL = window.location.search.substring(1)
      var sURLVariables = sPageURL.split('&')
      for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=')
        if (sParameterName[0] == sParam) {
          return sParameterName[1]
        }
      }
    }
    var config = {
      apiKey: "AIzaSyAkp9Xj0ckAT1l7yLPp1CU5812g_Y8ebYI",
      authDomain: "graphite-88e41.firebaseapp.com",
      databaseURL: "https://graphite-88e41.firebaseio.com",
      projectId: "graphite-88e41",
      storageBucket: "graphite-88e41.appspot.com",
      messagingSenderId: "158148550453"
    };
    firebase.initializeApp(config);
    var provider = new firebase.auth.GoogleAuthProvider();

    let app =  new Vue( {
      el: "#app",
      name: "editor",
      data: {
        user: {
          uid: "u"
        },
        uid: "u",
        url: "loading"

      },
      mounted() {
        firebase.auth().onAuthStateChanged(user => {
          if (user) {
            console.log(user)
            this.user = user
            this.uid = user.uid
            this.url = `https://app.graphitewriter.com/d/${this.uid}/${GetURLParameter("d")}`
            window.location.href = this.url
          }
        })
        console.log("mounted", this.url)
      }
    })
  </script>



</body>

</html>